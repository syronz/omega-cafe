nguage: go

go:
  - 1.13.x

services:
  - mysql

before_install:
  - mysql -e 'CREATE DATABASE omega_test;'
  - cd cmd/omega
  - go get github.com/mattn/goveralls


script:
  - cd ../..
  - go test ./...
  - go test ./... -race -coverprofile=coverage.txt -covermode=atomic
  - $GOPATH/bin/goveralls -service=travis-ci

after_success:
  - bash <(curl -s https://codecov.io/bash)

env:
  - GO111MODULE=on
